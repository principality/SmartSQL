# 分片的实现

## 思路

分片的方法有多种，需要抽象其实现流程

- 获取分片的方法，初始化分片的处理器
- 查询/更新/插入/删除，根据分片方法分配到不同的片上
  - 根据不同的分片方法调用分片的实现方法
  - 计划支持的分片策略：
    1. 按表名指定目标数据库；
    2. 按主键Hash分片；
    3. 按主键范围分片；
  - 按主键分片，可以通过建立虚拟索引，即常见查询业务键到键值的映射关系
- 合并最终结果 

## 组件

### util

对分片方法实现的支撑

- range: 指定分片算法
- keygen: 键分片算法

### merge

完成分片的计算后，需要把结果进行合并

### meta

记录分片的表信息
- 分片的列表
- 分片的方法，以及相应的参数

先用model.json文件进行配置，计划将来该部分实现放到MetaRepository中