
# 设计简介

基于分布式存储的分布式计算框架

## High level overview

```
+---------------+ 
|               | 
|     query     | 
|               | 
+-------+-------+ 
        | 
        | 
+-------v-------+    +---------------+    +---------------+
|               |    |               |    |               |
|    SmartSQL   |    |    SmartSQL   |    |    SmartSQL   |
|               |    |               |    |               |
+---------------+    +---------------+    +---------------+
|               +---->               +---->               |
|     Cache     |    |     Cache     |    |     Cache     |
|               <----+               <----+               |
+-------+-------+    +-------+-------+    +-------+-------+
        |                    |                    |
        |                    |                    |
+-------v-------+    +-------v-------+    +-------v-------+
|               |    |               |    |               |
|     Store     |    |     Store     |    |     Store     |
|               |    |               |    |               |
+---------------+    +---------------+    +---------------+

```

## features

- 支持分布式计算模型，支持读写分离，优化读写查询，实现计算和读写压力分离
  - 分布式计算：通过将计算分摊到不同节点上，获得更高的查询性能
  - 分布式读写：通过负载均衡到不同的节点上，获得更高的吞吐量
- 内存式计算，使用自管理内存模型，防gc抖动和oom
- UDF支持，实现行列计算优化，向量化计算优化，充分利用现代计算机硬件性能
- 集中式的缓冲管理服务，依据缓冲优化查询性能
- 支持Store节点在线扩容和分库分表，实现后端的线性扩展
- 支持Store节点高可用，支持故障检测，实现后端容错切换
- 存储层管理，实现对后端实现查询路由、心跳检测、故障切换，支持多种后端服务
- Metadata服务器，支持云端配置，把公共信息从单点中剥离，供多点公用，实现单点的无状态计算
- 多点服务，弹性扩展，实现查询从单点到多点的分布，实现服务节点的负载均衡
- 实现多点协助的分布式计算，增强数据库功能支持
- 实现数据水平扩容，自动分区，容灾备份，在线升级等功能，降低运维成本
- 实现多点协助的分布式查询，支持自定义函数，实现查询的智能化
- 实时流式数据写入
- 分布式存储方案，线性扩展
- 提供上层的jdbc connector，提供上层的driver
- 提供上层的缓存读取写入，提升实时应用能力

## detail

### 分布式框架

节点感知，可靠性，弹性，自适应……：actor based cluster, akka

### 请求队列

- 单连接单actor，实现单客户端的次序控制
- 多连接并发访问，依赖底层引擎对时序的支持
